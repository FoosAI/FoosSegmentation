{
    "transforms":
    [
        { "_comment_":"-------- Load random frames ---------" },
        {
            "name":"random_video_loader",
            "endswith":".avi",
            "folder":".\\..\\..\\Data\\Processed\\BallSegmentation\\",
            "output":"frame",
            "exclusions":[],
            "random":true,
            "value_loader":
            {
                "json":
                {
                    "values_to_load":["ball"]
                }
            }
        },
        {
            "name":"require",
            "input":"frame"
        },
        {
            "name":"require",
            "input":"ball"
        },

        { "_comment_":"-------- Run the table segmentation model ---------" },
        {
            "name":"resize_point",
            "input":"ball",
            "source_frame_size":"frame",
            "output":"ball",
            "size":[256,512]
        },
        {
            "name":"resize",
            "input":"frame",
            "output":"frame",
            "size":[256,512],
            "resize_mode":"stretch"  
        },
        {
            "name":"normalize_channels",
            "input":"frame",
            "output":"frame",
            "max":1.0,
            "min":0.0
        },
        {
            "name":"run_model",
            "input":"frame",
            "model_file":"models_67.h5",
            "output":"segmentation"
        },
        {
            "name":"channel_max",
            "input":"segmentation",
            "output":"segmentation",
            "max":1.0,
            "min":0.0
        },

        { "_comment_":"-------- Extract the table ---------" },
        {
            "name":"contours_find",
            "input":"segmentation",
            "output_frame":"frame_with_contours",
            "output_contours":"contours_table",
            "threshold":0.5,
            "channel":0,
            "largest":1,
            "convert_to_convex_hull":false,
            "convert_to_bounding_rectangle":false,
            "convert_to_rotated_bounding_rectangle":false,
            "contour_min_area_pixels":10000
        },
        {
            "name":"contours_to_frames",
            "input_frame":"frame",
            "input_contours":"contours_table",
            "input_point":"ball",
            "output_frames":["frame_table"],
            "output_num_frames":"frame_table_loaded",
            "output_frame_width":256,
            "output_frame_height":256,
            "output_points":["ball_table"]
        },
        {
            "name":"require",
            "input":"frame_table"
        },


        { "_comment_":"-------- Draw the ball ---------" },
        {
            "name":"draw_circle",
            "input_frame":"frame_table",
            "input_point":"ball_table",
            "radius":16,
            "thickness":4,
            "color":[0,0,255]
        },
        {
            "name":"show_frame",
            "input":"frame_table",
            "display":"ball",
            "wait_for_key":true
        }
    ]
}
